<?php

namespace MyCp\mycpBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * serviceFeeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class serviceFeeRepository extends EntityRepository {

    public function getCurrent()
    {
        $em = $this->getEntityManager();

        return $em->createQueryBuilder()->from("mycpBundle:serviceFee", "s")
                  ->select("s")
                  ->where("s.current = 1")
                  ->orderBy("s.date", "DESC")
                  ->getQuery()->getOneOrNullResult();
    }

    public function calculateServiceFee()
    {
        $currentServiceFee = $this->getCurrent();

        return array(
            "fixedFee" => $currentServiceFee->getFixedFee(),
            "touristFee" => 0
        );
    }
}
