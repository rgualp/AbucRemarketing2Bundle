<?php

namespace MyCp\mycpBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * penaltyRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class penaltyRepository extends EntityRepository {

    public function findByAccommodation($accommodationId){
        $em = $this->getEntityManager();

        $query = $em->createQueryBuilder()
            ->from("mycpBundle:penalty", "p")
            ->select("p")
            ->join("p.accommodation", "accommodation")
            ->where("accommodation.own_id = :accommodationId")
            ->setParameter("accommodationId", $accommodationId)
            ->orderBy("p.creationDate", "DESC")
            ->getQuery();
        ;
        return $query;
    }

    public function findAll(){
        $em = $this->getEntityManager();

        $query = $em->createQueryBuilder()
            ->from("mycpBundle:penalty", "p")
            ->select("p")
            ->join("p.accommodation", "accommodation")
            ->orderBy("p.creationDate", "DESC")
            ->getQuery();
        ;
        return $query;
    }

}
