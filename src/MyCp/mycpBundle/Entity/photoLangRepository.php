<?php

namespace MyCp\mycpBundle\Entity;

use Doctrine\ORM\EntityRepository;
use MyCp\mycpBundle\Entity\photoLang;

/**
 * photoLangRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class photoLangRepository extends EntityRepository
{
    public function insert_photo_lang($data,$id_photo)
    {
        $em = $this->getEntityManager();
        $keys=array_keys($data);

        foreach($keys as $item)
        {
            if(strpos($item, 'description')!==false)
            {
                $id=substr($item, 12, strlen($item));
                $photo_lang= new photoLang();
                $photo=$em->getRepository('mycpBundle:photo')->find($id_photo);
                $photo_lang->setPhoLangIdPhoto($photo);
                $photo_lang->setPhoLangDescription($data['description_'.$id]);
                $lang=$em->getRepository('mycpBundle:lang')->find($id);
                $photo_lang->setPhoLangIdLang($lang);
                $em->persist($photo_lang);
            }
        }
        $em->flush();
    }
}
