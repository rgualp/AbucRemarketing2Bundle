$(function(){$("[rel='tooltip']").tooltip()});$(document).ready(start);function start(){$(".numeric").keydown(function(a){$("#log").text("keyCode: "+a.keyCode);if((a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.keyCode!=8&&a.keyCode!=9){a.preventDefault()}});currency_change();language_change();manage_favorities(".favorite_off_action");manage_favorities(".favorite_on_action");details_favorites("#delete_from_favorites");details_favorites("#add_to_favorites");delete_from_list_favorites();change_faq();reservations();$(".accordion a.accordion-toggle").addClass("collapsed")}function reservations(){$("a.combo_genders_elements").click(function(){var a=$(this).attr("data-value");$("#user_tourist_gender").val(a)});$("ul.combo_nationality_items a.option").click(function(){var a=$(this).attr("data-value");$("#user_tourist_nationality").val(a)});$("ul.combo_hours_elements a.option").click(function(){var a=$(this).attr("data-value");$("#reservation_hour").val(a)})}function change_faq(){$("#faq_categories li").click(function(){$("#faq_categories li").removeClass("active");$(this).addClass("active");var c=$(this).attr("data-value");var b=$("#faq_categories").attr("data-url-filter");var a=$("#div_result");c=(c!=-1)?c:null;show_loading();$.post(b,{category_id:c},function(d){a.html(d);hide_loading()});return false})}function language_change(){$(".language_link").click(function(){var b=$(this).attr("data-url");var d=$(this).attr("data-refresh-url");var c=$(this).attr("data-new-lang-code");var a=$(this).attr("data-current-lang-code");$.post(b,{lang_code:$(this).attr("data-new-lang-code"),lang_name:$(this).attr("data-lang-name"),lang_id:$(this).attr("data-lang-id")},function(e){window.location=d.replace("/"+a+"/","/"+c+"/")})})}function currency_change(){$(".currency_link").click(function(){var a=$(this).attr("data-url");var b=$(this).attr("data-refresh-url");$.post(a,{curr_id:$(this).attr("data-currency-id"),refresh_url:$(this).attr("data-refresh-url")},function(c){window.location=b})})}function manage_favorities(a){$(a).click(function(){var f=$(this).attr("data-url");var b=$(this).attr("data-favorite-type");var c=$(this).attr("data-element-id");var d=$(this).attr("data-list-preffix");var e="favorite_"+b+"_"+c;var g=$(this).attr("data-include_text");$.post(f,{favorite_type:b,element_id:c,list_preffix:d,include_text:g},function(h){$("."+e).html(h);manage_favorities(".favorite_off_action");manage_favorities(".favorite_on_action")})})}function details_favorites(a){$(a).click(function(){var d=$(this).attr("data-url");var b=$(this).attr("data-type");var c=$(this).attr("data-id");$.post(d,{favorite_type:b,element_id:c},function(e){$(".favorites_details").html(e);details_favorites("#delete_from_favorites");details_favorites("#add_to_favorites")})})}function delete_from_list_favorites(){$(".delete_from_favorite_list").click(function(){var c=$(this).attr("data-url");var a=$(this).attr("data-favorite-type");var b=$(this).attr("data-element-id");var d=$(this).attr("data-url-statistics");show_loading();$.post(c,{favorite_type:a,element_id:b},function(e){update_statistics(a,d);if(a=="ownership"||a=="ownershipfav"){$("#div_result").html(e)}else{if(a=="destination"){$("#div_result_destinations").html(e)}}delete_from_list_favorites();hide_loading();$("img.lazy").jail()})})}function update_statistics(a,b){$.post(b,{favorite_type:a},function(c){if(a=="ownership"){$("#total_fav_own").html(c)}else{if(a=="destination"){$("#total_fav_dest").html(c)}}})}function show_loading(){$("#loading").removeClass("hidden")}function hide_loading(){$("#loading").addClass("hidden")}function send2Friend(){var d=$("#send_to_friend_popup").attr("data-url");var a=$("#send_to_friend_popup").attr("data-email-type");var c=$("#send_to_friend_popup").attr("data-dest-prop-id");var f=$("#name_from").val();var e=$("#email_from").val();var b=$("#email_to").val();if(!document.mail_popup_form.checkValidity()){if(f===""){$("#name_from").css("borderColor","red")}else{if(e===""){$("#email_from").css("borderColor","red")}else{$("#email_to").css("borderColor","red")}}return}$("#sending_mail").removeClass("hidden");$.post(d,{email_type:a,dest_prop_id:c,name_from:f,email_from:e,email_to:b},function(g){$("#name_from").val("");$("#email_from").val("");$("#name_from").val("");$("#email_to").val("");$("#send_to_friend_popup").modal("hide");$("#sending_mail").addClass("hidden")})}function move(d){var c=$(d);var a=$(c).offset();var b=a.top;$("body,html").animate({scrollTop:b},500)};