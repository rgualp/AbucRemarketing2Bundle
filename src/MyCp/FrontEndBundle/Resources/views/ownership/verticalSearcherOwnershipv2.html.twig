<div class="filters-container">
    <div class="row">
        <div class="col-sm-12">
            <div class="col-sm-3 p-5"><input {% if isDestination is defined and isDestination == true %}disabled{% endif %} type="text" class="form-control gtm-input-text"
                                             {% if app.session.get('search_text') != null and app.session.get('search_text') != 'null' %}value="{{ app.session.get('search_text') }}"{% endif %}
                                             placeholder="{{ "PLACE_WATERMARK" | trans }}" id="input_text"
                                             autocomplete="off" data-highlighter="null" data-items="5"
                                             data-provide="typeahead"/></div>
            <div class="col-sm-2 p-5">
                <div rel="tooltip" title="{{ 'ARRIVAL_WATERMARK' | trans }}" class="input-group" style="padding: 0">
                    <input class="form-control" type="text"
                           value="{{ (isDateTime(app.session.get('search_arrival_date')) ) ? (app.session.get('search_arrival_date')|date("d/m/Y")) : ("now" |date("d/m/Y")) }}"
                           placeholder="{{ "ARRIVAL_WATERMARK" | trans }}" id="input_arrival_date"
                           data-localization='{{ locale }}'>
                    <span class="input-group-addon show_calendar"><span class="icon-calendar"></span></span>
                </div>
            </div>
            <div class="col-sm-2 p-5">
                <div rel="tooltip" title="{{ 'DEPARTURE_WATERMARK' | trans }}" class="input-group" style="padding: 0">
                    <input class="form-control" type="text"
                           value="{{ (isDateTime(app.session.get('search_departure_date')) ) ? (app.session.get('search_departure_date')|date("d/m/Y")) : ("+2 days" |date("d/m/Y")) }}"
                           placeholder="{{ "DEPARTURE_WATERMARK" | trans }}" id="input_departure_date"
                           data-localization='{{ locale }}'>
                    <span class="input-group-addon show_calendar"><span class="icon-calendar"></span></span>
                </div>
            </div>
            <div class="col-sm-2 p-5"><select class="form-control bs-select" id="input_guests">
                    <option value="1" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "1" %} selected {% endif %}>{{ "GUEST_WATERMARK" | trans }}</option>
                    <option value="2" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "2" %} selected {% endif %}>
                        2 {{ "GUESTS" | trans }}</option>
                    <option value="3" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "3" %} selected {% endif %}>
                        3 {{ "GUESTS" | trans }}</option>
                    <option value="4" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "4" %} selected {% endif %}>
                        4 {{ "GUESTS" | trans }}</option>
                    <option value="5" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "5" %} selected {% endif %}>
                        5 {{ "GUESTS" | trans }}</option>
                    <option value="6" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "6" %} selected {% endif %}>
                        6 {{ "GUESTS" | trans }}</option>
                    <option value="7" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "7" %} selected {% endif %}>
                        7 {{ "GUESTS" | trans }}</option>
                    <option value="8" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "8" %} selected {% endif %}>
                        8 {{ "GUESTS" | trans }}</option>
                    <option value="9" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "9" %} selected {% endif %}>
                        9 {{ "GUESTS" | trans }}</option>
                    <option value="10" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "10" %} selected {% endif %}>
                        10 {{ "GUESTS" | trans }}</option>
                    <option value="+10" {% if app.session.get('search_guests') != null and app.session.get('search_guests') == "+10" %} selected {% endif %}>
                        +10 {{ "GUESTS" | trans }}</option>
                </select></div>
            <div class="col-sm-2 p-5"><select class="form-control bs-select" id="input_room">
                    <option value="1" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "1" %} selected {% endif %}>{{ "ROOM_WATERMARK" | trans }}</option>
                    <option value="2" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "2" %} selected {% endif %}>
                        2 {{ "ROOM_PLURAL" | trans | capitalize }}</option>
                    <option value="3" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "3" %} selected {% endif %}>
                        3 {{ "ROOM_PLURAL" | trans | capitalize }}</option>
                    <option value="4" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "4" %} selected {% endif %}>
                        4 {{ "ROOM_PLURAL" | trans | capitalize }}</option>
                    <option value="5" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "5" %} selected {% endif %}>
                        5 {{ "ROOM_PLURAL" | trans | capitalize }}</option>
                    <option value="+5" {% if app.session.get('search_rooms') != null and app.session.get('search_rooms') == "+5" %} selected {% endif %}>
                        +5 {{ "ROOM_PLURAL" | trans | capitalize }}</option>
                </select></div>
        </div>
        <div class="col-sm-1 p-5 pull-right">
            {% if is_within_search_results %}
                <button style="padding: 2px 15px;" id="button_research" class="btn btn-primary btn-large pull-right"
                        data-url="{{ path('frontend_research_ownership_callback') }}">{{ "SEARCH" | trans|capitalize }}</button>
            {% else %}
                <button style="padding: 2px 15px;" id="btn_search" class="btn btn-primary btn-large pull-right"
                        data-url="{{ path('frontend_search_ownership',{'text':'_text', 'arrival':'_arrival','departure':'_departure','guests':'_guests','rooms':'_rooms','order_price':'_order_price', 'order_comments':'_order_comments', 'order_books':'_order_books' }) }}"
                        onclick="search()">{{ "SEARCH" | trans|capitalize }}</button>
            {% endif %}
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <div class="checkbox" style="margin: 0">
                <label>
                    <input class="action_remove_filter_up" type="checkbox" id="own_inmediate_booking2"
                           name="own_inmediate_booking2" {% if app.session.get('inmediate') != null and app.session.get('inmediate') == "1" %} checked="checked"{% endif %}
                           data-aux-text="{{ "IMMEDIATE_BOOKING" | trans }}"
                           data-aux-text="{{ "IMMEDIATE_BOOKING" | trans }}"/>{{ 'IMMEDIATE_BOOKING'|trans }}
                </label>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="checkbox" style="margin: 0">
                <label>
                    <input class="action_remove_filter_up" type="checkbox" id="own_inmediate_booking"
                           name="own_inmediate_booking" {% if check_filters is defined and check_filters['own_inmediate_booking'] is defined and check_filters['own_inmediate_booking'] %} checked="checked"{% endif %}
                           data-aux-text="{{ "quick_bookinhg" | trans }}"
                           data-aux-text="{{ "quick_bookinhg" | trans }}"/>{{ 'quick_bookinhg'|trans }}
                </label>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="checkbox" style="margin: 0">
                <label>
                    <input class="action_remove_filter_up" type="checkbox" id="own_update_avaliable"
                           name="own_update_avaliable" {% if check_filters is defined and check_filters['own_update_avaliable'] is defined and check_filters['own_update_avaliable'] %} checked="checked"{% endif %}
                           data-aux-text="{{"Calendario Actualizado" | trans}}"
                           data-aux-text="{{"Calendario Actualizado" | trans}}"/>{{"Calendario Actualizado" | trans}}
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 text-center">
            <a id="more_filters" class="collapsed" data-toggle="collapse" href="#collapseFilters" style="margin-right: 10px;">{{ 'MORE_FILTERS'|trans }}</a>
        </div>
    </div>

</div>

<script type="text/javascript">
    var today_date = "{{ "now"|date("d/m/Y") }}";
    var start_date = "{{ (isDateTime(app.session.get('search_arrival_date')) ) ? (app.session.get('search_arrival_date')|date("d/m/Y")) : ("now"|date("d/m/Y")) }}";
    var end_date = "{{ (isDateTime(app.session.get('search_departure_date')) ) ? (app.session.get('search_departure_date')|date("d/m/Y")) : "+2 days" |date("d/m/Y") }}";

    var autocomplete_text_list = {{ autocomplete_text_list |raw}};

    $('#more_filters').on('click', function () {
        if ($('#more_filters').hasClass('collapsed')) {
            $('#button_research').addClass('hide');
            $('#more_filters').removeClass('collapsed');


            var full_height = $(window).height() - ($("#search-container").offset().top + $(".filters-container").height() + 20);
            var scroll_h = full_height - 100;

            $('#collapseFilters .thumbnail').css("height", full_height + "px");

            $('#collapseFilters .thumbnail .content-filter').slimScroll({
                height: scroll_h + 'px',
                start: 'top'
            });


        }
        else {
            $('#button_research').removeClass('hide');
            $('#more_filters').addClass('collapsed');
        }
    });

</script>