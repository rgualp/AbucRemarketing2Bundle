{% set main_tab = 1 %}
{% set is_home = 1 %}
{% extends 'FrontEndBundle:layout:base.html.twig' %}
{% set section = constant('\\MyCp\\mycpBundle\\Entity\\metaTag::SECTION_HOMEPAGE') %}

{#{% block title %}{{"HOMEPAGE_TITLE" | trans | title}}{% endblock %}#}

{% block big_banner %}
    <div id="full-width-slider" style="min-height: 400px; background-color: #cfd9f1		 ">
        {#{{ include('FrontEndBundle:layout:carousel.html.twig') }}#}
    </div>
    <div id="banner-msg-cont">
        <div id="banner-msg">
            <h1 class="caecilia-roman">{{ "SLOGAN_1" | trans }}<br> {{ "SLOGAN_2" | trans }}</h1>
            <h2>{{ "SLOGAN_3" | trans }}</h2>
        </div>
    </div>
    <div id="main-search" style="position: relative; z-index: 100">
        {{ render(controller('FrontEndBundle:Ownership:orangeSearchBar')) }}
    </div>
{% endblock %}
{% block body %}

    <div class="container">
        {#<h1 class="text-center"><small><h1 class="caecilia-roman" style="margin-top: 13px; font-size: 24px">{{"HOMEPAGE_SUBTITLE_2" | trans}}</h1></small></h1>#}
        <h2 class="text-center caecilia-roman h-grey h-size-2">{{ "HOMEPAGE_SUBTITLE_2" | trans }}</h2>

        {#<div id="top_rated_placeholder" data-url="{{ path('frontend_top_rated_callback_ownership') }}"#}
        {#data-url-change-category="{{ path('frontend_top_rated_change_category_callback_ownership') }}">#}
        {#{{ include('FrontEndBundle:ownership:homeTopRatedOwnership.html.twig', {'own_top20_list':own_top20_list,#}
        {#'premium_total': premium_total,#}
        {#'midrange_total': midrange_total,#}
        {#'economic_total': economic_total}) }}#}
        {#</div>#}

        <div class="row">
            {{ include('FrontEndBundle:ownership:newHomeTopRatedOwnership.html.twig') }}
        </div>

        <div class="text-center" style="margin-top: 3em;"><span
                    class="caecilia-roman"
                    style="margin-top: 15px; margin-bottom: 15px; font-size: 24px; font-weight:normal;color: #999999;margin-bottom:11.5px">{{ "HOMEPAGE_SUBTITLE_1" | trans }}</span>
        </div>
        <p>{{ "HOMEPAGE_TEXT" | trans }}</p>
    </div>
    {#{{ render(controller('FrontEndBundle:Public:portafolio')) }}#}
    <div class="container">
        {{ render(controller('FrontEndBundle:Public:homeCarrousel')) }}
    </div>
    <div id="map-cont" style="margin-bottom: 0; margin-top: 3em;">
        <div class="container">
            <div class="text-center"><label class="caecilia-roman"
                                            style="margin-top: 15px; margin-bottom: 15px; font-size: 24px; font-weight:normal;color: #999999;margin-bottom:11.5px">{{ "PLACE_IN_CUBA_TO_VISIT" | trans }}</label>
            </div>
        </div>
        <div>
            {#{{ render(controller('FrontEndBundle:Destination:getDestinationsByActivitiesForMap')) }}#}
            {{ include('FrontEndBundle:destination:map_with_activities.html.twig') }}
        </div>
    </div>
    <div class="modal inmodal fade" id="myModalOwnerShipCalendar" tabindex="-1" role="dialog"  aria-hidden="true"></div>
    {{ include('FrontEndBundle:script:script.html.twig') }}
{% endblock %}
{% block javascripts %}
    <script type="text/javascript">
        var frontend_public_load_slide = "{{ path("frontend_public_load_slide") }}";

        function initJSTwig() {

            $("#full-width-slider").load(frontend_public_load_slide, [], function (e) {
                jQuery('#camera_wrap_1').camera({
                    thumbnails: false,
                    pagination: false,
                    height: '400px'
                });
            });

            $('#th-destination-carousel').on('slid.bs.carousel', function () {
                $(window).trigger("scroll");
            })

            old_class = '';
            $('.home_cat .col-md-4 div').mouseover(function () {
                elem = $('.' + $(this).attr('data'));
                old_class = elem.attr('class');
                elem.addClass('hover');
            })
            $('.home_cat .col-md-4 div').mouseout(function () {
                elem = $('.' + $(this).attr('data'));
                elem.attr('class', old_class);
            });

            findTopRate(1);
        }

        function initNavigationTopRate(){

            jQuery('#toprate-navigation span.act').click(function (s) {
                if (jQuery(this).hasClass('tr-next')){
                    var _page = parseInt(jQuery('#toprate-list .thumbs-houses').attr('current-page')) + 1;
                    console.log(_page);
                    if (_page <= parseInt(jQuery('#toprate-list .thumbs-houses').attr('total-page'))){
                        findTopRate(_page);
                    }
                }else{
                    var _page = parseInt(jQuery('#toprate-list .thumbs-houses').attr('current-page')) - 1;
                    console.log(_page);
                    if (_page > 0)
                        findTopRate(_page);
                }
            })
        }
        function findTopRate(page) {
            jQuery('#toprate-navigation span.act').unbind();
            jQuery("#toprate-list").empty();

            jQuery("#toprate-list").append(jQuery("#grid-load").html());

            jQuery("#toprate-list").load(top_rated_callback, {page: page}, function (result) {
                initNavigationTopRate();

                if ($('.bttrlazyloading').length > 0){
                    $('.bttrlazyloading').each(function () {
                        $("#"+$(this).attr("id")).bttrlazyloading();
                    });
                }
            });
        }
    </script>
{% endblock javascripts %}

